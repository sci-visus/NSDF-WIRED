[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "UBC Smoke Forecast Data Curation",
    "section": "",
    "text": "Preface\nWelcome to NSDF’s UBC Firesmoke Data Curation website. Here we describe the data curation process of UBC’s Smoke Forecast datasets. We inform readers of the challenges and solutions we found when repurposing these short term datasets into a long term dataset.\nIt is important to note that although we will present the data curation process in a linear fashion here, it was not a linear process. Rather, the process was cyclical, and at each iteration we introduced new improvements.",
    "crumbs": [
      "Preface"
    ]
  },
  {
    "objectID": "intro.html",
    "href": "intro.html",
    "title": "1  Introduction",
    "section": "",
    "text": "Wildfires in North America have significantly impacted ecosystems and human society [1]. Climate change affects the frequency, duration, and severity of wildfires thus necessitating the use of wildfire prediction systems to effectively mitigate wildfire impact. However, data for understanding the impact of climate change on wildfires is limited, only available for a few regions and for only a few decades [2]. Furthermore, wildfire prediction systems in North America prioritize decision making and fire management on short timescales, from minutes to months. Therefore, long term wildfire prediction systems have limited access to aggregate short term data, due to resource constraints from fire management entities to share the data they collect and curate.\nThe Weather Forecast Research Team at the University of British Columbia (UBC) generates a short term dataset of PM2.5 smoke particulate presence in North America. Over the past 3 years, each day four times a day, UBC has created forecasts of PM2.5 smoke particulate on the ground for Canada and the continental United States. This is done using their The BlueSky Western Canada Wildfire Smoke Forecasting System. UBC provides access to this data to paying customers and for free on a daily basis via a web-based visualization and file download.\nThese smoke predictions are useful for those who must make decisions on how to deal with smoke as it comes. However, these years of forecasts are not available in a non-trivial fashion for long term forecasting. The data only exists among the hundreds of netCDF files that UBC has generated.\nOur task is to obtain a single long term dataset from the smoke forecast files that are available from UBC.\n\n2 References\n[1] https://dl.acm.org/doi/abs/10.1145/583890.583893\n[2] climate change and wildfire article that was in spanish",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Introduction</span>"
    ]
  },
  {
    "objectID": "summary.html",
    "href": "summary.html",
    "title": "2  Summary",
    "section": "",
    "text": "In summary, this book has no content whatsoever.",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Summary</span>"
    ]
  },
  {
    "objectID": "references.html",
    "href": "references.html",
    "title": "References",
    "section": "",
    "text": "Knuth, Donald E. 1984. “Literate Programming.” Comput.\nJ. 27 (2): 97–111. https://doi.org/10.1093/comjnl/27.2.97.",
    "crumbs": [
      "References"
    ]
  },
  {
    "objectID": "proj_struct.html",
    "href": "proj_struct.html",
    "title": "2  Project Structure",
    "section": "",
    "text": "Curating the set of netCDF files containing Smoke Forecasts to a single 3D array stored in OpenVisus’ IDX format requires iterative refinement. We return to different steps in the process to produce a higher quality curation each time, hence various versions of the steps outlined below.\nEach step is described by it’s directory name, see below what each directory contains: - data_download: Script about downloading the netCDF files from FireSmoke Canada. - conversion: Versions of our script to convert the hundreds of netCDF files to a single IDX file. - visualizations: Quick and dirty visualizations to inspect our data under different contexts. Subdirectory demos has versions of self-contained demos using the data in IDX format. - data_quality: Scripts toward identifying gaps and issues like silent corruption. - data: netCDF file for final use, non-interim.\nCheck the readme.md of each directory to see further details about each step.",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Project Structure</span>"
    ]
  },
  {
    "objectID": "data_desc.html",
    "href": "data_desc.html",
    "title": "2  The Data Source",
    "section": "",
    "text": "2.1 Data Access\nFigure 1 shows how to download the 2-day forecast for the forecast initalization date of one’s choice. The downloaded file is in NetCDF format.",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>The Data Source</span>"
    ]
  },
  {
    "objectID": "data_desc.html#data-access",
    "href": "data_desc.html#data-access",
    "title": "2  The Data Source",
    "section": "",
    "text": "Forecast ID\nDescription\nURL\nInstructions\n\n\n\n\nBSC00CA12-01\nBlueSky Canada smoke forecast, 00Z met (12km grid), 08Z fires, North America domain\nhttps://firesmoke.ca/forecasts/BSC00CA12-01/YYYYMMDD08/\nReplace YYYYMMDD with date; append “dispersion.nc” or “dispersion.kmz” to download data\n\n\nBSC06CA12-01\nBlueSky Canada smoke forecast, 06Z met (12km grid), 14Z fires, North America domain\nhttps://firesmoke.ca/forecasts/BSC06CA12-01/YYYYMMDD14/\nReplace YYYYMMDD with date; append “dispersion.nc” or “dispersion.kmz” to download data\n\n\nBSC12CA12-01\nBlueSky Canada smoke forecast, 12Z met (12km grid), 20Z fires, North America domain\nhttps://firesmoke.ca/forecasts/BSC12CA12-01/YYYYMMDD20/\nReplace YYYYMMDD with date; append “dispersion.nc” or “dispersion.kmz” to download data\n\n\nBSC18CA12-01\nBlueSky Canada smoke forecast, 18Z met (12km grid), 02Z fires, North America domain\nhttps://firesmoke.ca/forecasts/BSC18CA12-01/YYYYMMDD02/\nReplace YYYYMMDD with date; append “dispersion.nc” or “dispersion.kmz” to download data",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>The Data Source</span>"
    ]
  },
  {
    "objectID": "data_desc.html#netcdf-file-attributes",
    "href": "data_desc.html#netcdf-file-attributes",
    "title": "2  The Data Source",
    "section": "2.3 NetCDF File Attributes",
    "text": "2.3 NetCDF File Attributes\n#TODO, MOVE TO ANOTHER SPOT: To view and manipulate NetCDF files, we have selected the xarray Python library and created a custom built backend that connects xarray to the OpenVisus framework.\nThe following shows the contents of the dispersion.nc file downloaded from the UBC website for dataset BSC00CA12-01 date March 4, 2021. We load it using xarray.\n\nimport xarray as xr\n\nds = xr.open_dataset(\"netCDFs/dispersion_20210304_00.nc\")\nds\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n&lt;xarray.Dataset&gt;\nDimensions:  (TSTEP: 51, VAR: 1, DATE-TIME: 2, LAY: 1, ROW: 381, COL: 1041)\nDimensions without coordinates: TSTEP, VAR, DATE-TIME, LAY, ROW, COL\nData variables:\n    TFLAG    (TSTEP, VAR, DATE-TIME) int32 ...\n    PM25     (TSTEP, LAY, ROW, COL) float32 ...\nAttributes: (12/33)\n    IOAPI_VERSION:  $Id: @(#) ioapi library version 3.0 $                    ...\n    EXEC_ID:        ????????????????                                         ...\n    FTYPE:          1\n    CDATE:          2021063\n    CTIME:          101914\n    WDATE:          2021063\n    ...             ...\n    VGLVLS:         [10.  0.]\n    GDNAM:          HYSPLIT CONC    \n    UPNAM:          hysplit2netCDF  \n    VAR-LIST:       PM25            \n    FILEDESC:       Hysplit Concentration Model Output                       ...\n    HISTORY:        xarray.DatasetDimensions:TSTEP: 51VAR: 1DATE-TIME: 2LAY: 1ROW: 381COL: 1041Coordinates: (0)Data variables: (2)TFLAG(TSTEP, VAR, DATE-TIME)int32...units :&lt;YYYYDDD,HHMMSS&gt;long_name :TFLAG           var_desc :Timestep-valid flags:  (1) YYYYDDD or (2) HHMMSS                                [102 values with dtype=int32]PM25(TSTEP, LAY, ROW, COL)float32...long_name :PM25            units :ug/m^3          var_desc :PM25                                                                            [20227671 values with dtype=float32]Indexes: (0)Attributes: (33)IOAPI_VERSION :$Id: @(#) ioapi library version 3.0 $                                           EXEC_ID :????????????????                                                                FTYPE :1CDATE :2021063CTIME :101914WDATE :2021063WTIME :101914SDATE :2021063STIME :90000TSTEP :10000NTHIK :1NCOLS :1041NROWS :381NLAYS :1NVARS :1GDTYP :1P_ALP :0.0P_BET :0.0P_GAM :0.0XCENT :-104.0YCENT :51.0XORIG :-156.0YORIG :32.0XCELL :0.10000000149011612YCELL :0.10000000149011612VGTYP :5VGTOP :-9999.0VGLVLS :[10.  0.]GDNAM :HYSPLIT CONC    UPNAM :hysplit2netCDF  VAR-LIST :PM25            FILEDESC :Hysplit Concentration Model Output                                              lat-lon coordinate system                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       HISTORY :\n\n\nThe file contains the following attributes. Note that for all files across forecast IDs, they have the same dimension and variable names:\n\n2.3.1 Dimensions:\n\n\n\n\n\n\n\n\nDimension\nSize\nDescription\n\n\n\n\nTSTEP\n51\nThis dimension represents the number of time steps in the file. Each file has 51 hours represented.\n\n\nVAR\n1\nThis dimension is a placeholder for the variables in the file.\n\n\nDATE-TIME\n2\nThis dimension stores the date and time information for each time step.\n\n\nLAY\n1\nThis dimension represents the number of layers in the file, which is 1 in this case.\n\n\nROW\n381\nThis dimension represents the number of rows in the spatial grid.\n\n\nCOL\n1041\nThis dimension represents the number of columns in the spatial grid.\n\n\n\n\n\n2.3.2 Data Variables:",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>The Data Source</span>"
    ]
  },
  {
    "objectID": "data_desc.html#available-time-range",
    "href": "data_desc.html#available-time-range",
    "title": "2  The Data Source",
    "section": "2.2 Available Time Range",
    "text": "2.2 Available Time Range\nThe time ranges available for each forecast ID is shown in the following table:\n\n\n\n\n\n\n\n\n\nForecast ID\nDescription\nStart Date\nEnd Date\n\n\n\n\nBSC00CA12-01\nBlueSky Canada smoke forecast, 00Z met (12km grid), 08Z fires, North America domain\nMarch 4, 2021\nJune 27, 2024\n\n\nBSC06CA12-01\nBlueSky Canada smoke forecast, 06Z met (12km grid), 14Z fires, North America domain\nMarch 4, 2021\nJune 27, 2024\n\n\nBSC12CA12-01\nBlueSky Canada smoke forecast, 12Z met (12km grid), 20Z fires, North America domain\nMarch 3, 2021\nJune 27, 2024\n\n\nBSC18CA12-01\nBlueSky Canada smoke forecast, 18Z met (12km grid), 02Z fires, North America domain\nMarch 4, 2021\nJune 27, 2024\n\n\n\nThe smoke forecasts are updated daily, including the present day, so there is no fixed end date. Therefore, the latest data must be downloaded on a regular basis. We have not implemented this process yet.\nThere is no official source stating the earliest available date for each forecast. So, knowing the project began in 2021, we inferenced that the earliest available date would be in 2021. Via trial and error we found the earliest available dates.\n#TODO The file downloaded at the specified URL download the 2-day forecast for [DATE] and [TIME] one could download the following files. [GET 2 DAY FORECAST DESCRIPTION FROM scribbles.ipynb].",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>The Data Source</span>"
    ]
  },
  {
    "objectID": "data_desc.html#data-description",
    "href": "data_desc.html#data-description",
    "title": "2  The Data Source",
    "section": "",
    "text": "2.1.1 Data Access\nUBC provides access to their data from their website firesmoke.ca. The data is available for download as NetCDF files by following the instructions specified below, for each forecast initalization time.\n\n\n\n\n\n\n\n\n\nForecast ID\nDescription\nURL\nInstructions\n\n\n\n\nBSC00CA12-01\nBlueSky Canada smoke forecast, 00Z met (12km grid), 08Z fires, North America domain\nhttps://firesmoke.ca/forecasts/BSC00CA12-01/YYYYMMDD08/\nReplace YYYYMMDD with date; append “dispersion.nc” or “dispersion.kmz” to download data\n\n\nBSC06CA12-01\nBlueSky Canada smoke forecast, 06Z met (12km grid), 14Z fires, North America domain\nhttps://firesmoke.ca/forecasts/BSC06CA12-01/YYYYMMDD14/\nReplace YYYYMMDD with date; append “dispersion.nc” or “dispersion.kmz” to download data\n\n\nBSC12CA12-01\nBlueSky Canada smoke forecast, 12Z met (12km grid), 20Z fires, North America domain\nhttps://firesmoke.ca/forecasts/BSC12CA12-01/YYYYMMDD20/\nReplace YYYYMMDD with date; append “dispersion.nc” or “dispersion.kmz” to download data\n\n\nBSC18CA12-01\nBlueSky Canada smoke forecast, 18Z met (12km grid), 02Z fires, North America domain\nhttps://firesmoke.ca/forecasts/BSC18CA12-01/YYYYMMDD02/\nReplace YYYYMMDD with date; append “dispersion.nc” or “dispersion.kmz” to download data\n\n\n\nThe file downloaded at the specified URL download the 2-day forecast for [DATE] and [TIME] one could download the following files. [GET 2 DAY FORECAST DESCRIPTION FROM scribbles.ipynb].\n\n\n2.1.2 Available Time Range\nThe time range for which we curated the data is shown in the following table:\n\n\n\n\n\n\n\n\n\nForecast ID\nDescription\nStart Date\nEnd Date\n\n\n\n\nBSC00CA12-01\nBlueSky Canada smoke forecast, 00Z met (12km grid), 08Z fires, North America domain\nMarch 4, 2021\nJune 27, 2024\n\n\nBSC06CA12-01\nBlueSky Canada smoke forecast, 06Z met (12km grid), 14Z fires, North America domain\nMarch 4, 2021\nJune 27, 2024\n\n\nBSC12CA12-01\nBlueSky Canada smoke forecast, 12Z met (12km grid), 20Z fires, North America domain\nMarch 3, 2021\nJune 27, 2024\n\n\nBSC18CA12-01\nBlueSky Canada smoke forecast, 18Z met (12km grid), 02Z fires, North America domain\nMarch 4, 2021\nJune 27, 2024\n\n\n\nThe smoke forecasts are run each day including present day. Therefore there is no end date, rather one must continuously download the newest data on a regular basis. We have not done this yet.\nThere is no official source stating the earliest available date for each forecast. So, knowing the project began in 2021, we inferenced that the earliest available date would be in 2021. Via trial and error we found the earliest available dates.\n\n\n2.1.3 NetCDF File Attributes\n#TODO, MOVE TO ANOTHER SPOT: To view and manipulate NetCDF files, we have selected the xarray Python library and created a custom built backend that connect xarray to the OpenVisus framework.\nThe following shows the contents of the dispersion.nc file downloaded from the UBC website for dataset BSC00CA12-01 date March 4, 2021. We load it using xarray.\n\nimport xarray as xr\n\nds = xr.open_dataset(\"netCDFs/dispersion_20210304_00.nc\")\nds\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n&lt;xarray.Dataset&gt;\nDimensions:  (TSTEP: 51, VAR: 1, DATE-TIME: 2, LAY: 1, ROW: 381, COL: 1041)\nDimensions without coordinates: TSTEP, VAR, DATE-TIME, LAY, ROW, COL\nData variables:\n    TFLAG    (TSTEP, VAR, DATE-TIME) int32 ...\n    PM25     (TSTEP, LAY, ROW, COL) float32 ...\nAttributes: (12/33)\n    IOAPI_VERSION:  $Id: @(#) ioapi library version 3.0 $                    ...\n    EXEC_ID:        ????????????????                                         ...\n    FTYPE:          1\n    CDATE:          2021063\n    CTIME:          101914\n    WDATE:          2021063\n    ...             ...\n    VGLVLS:         [10.  0.]\n    GDNAM:          HYSPLIT CONC    \n    UPNAM:          hysplit2netCDF  \n    VAR-LIST:       PM25            \n    FILEDESC:       Hysplit Concentration Model Output                       ...\n    HISTORY:        xarray.DatasetDimensions:TSTEP: 51VAR: 1DATE-TIME: 2LAY: 1ROW: 381COL: 1041Coordinates: (0)Data variables: (2)TFLAG(TSTEP, VAR, DATE-TIME)int32...units :&lt;YYYYDDD,HHMMSS&gt;long_name :TFLAG           var_desc :Timestep-valid flags:  (1) YYYYDDD or (2) HHMMSS                                [102 values with dtype=int32]PM25(TSTEP, LAY, ROW, COL)float32...long_name :PM25            units :ug/m^3          var_desc :PM25                                                                            [20227671 values with dtype=float32]Indexes: (0)Attributes: (33)IOAPI_VERSION :$Id: @(#) ioapi library version 3.0 $                                           EXEC_ID :????????????????                                                                FTYPE :1CDATE :2021063CTIME :101914WDATE :2021063WTIME :101914SDATE :2021063STIME :90000TSTEP :10000NTHIK :1NCOLS :1041NROWS :381NLAYS :1NVARS :1GDTYP :1P_ALP :0.0P_BET :0.0P_GAM :0.0XCENT :-104.0YCENT :51.0XORIG :-156.0YORIG :32.0XCELL :0.10000000149011612YCELL :0.10000000149011612VGTYP :5VGTOP :-9999.0VGLVLS :[10.  0.]GDNAM :HYSPLIT CONC    UPNAM :hysplit2netCDF  VAR-LIST :PM25            FILEDESC :Hysplit Concentration Model Output                                              lat-lon coordinate system                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       HISTORY :\n\n\nThe file contains the following attributes. Note that for all files across forecast IDs, they have the same dimension and variable names:\n\n2.1.3.1 Dimensions:\n\nTSTEP: 51\n\nThis dimension represents the number of time steps in the file.\n\nVAR: 1\n\nThis dimension is a placeholder for different variables, with a single variable in this case.\n\nDATE-TIME: 2\n\nThis dimension stores the date and time information for each time step.\n\nLAY: 1\n\nThis dimension represents the number of layers in the file, which is 1 in this case.\n\nROW: 381\n\nThis dimension represents the number of rows in the spatial grid.\n\nCOL: 1041\n\nThis dimension represents the number of columns in the spatial grid.\n\n\n\n\n2.1.3.2 Data Variables:\n\nTFLAG\n\nDimensions: (TSTEP, VAR, DATE-TIME)\nData Type: int32\nThis variable stores the date and time of each time step.\n\nPM25\n\nDimensions: (TSTEP, LAY, ROW, COL)\nData Type: float32\nThis variable contains the concentration of particulate matter (PM2.5) for each time step, layer, row, and column in the spatial grid.",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>The Data Source</span>"
    ]
  },
  {
    "objectID": "data_desc.html#loading-from-data-source",
    "href": "data_desc.html#loading-from-data-source",
    "title": "2  The Data Source",
    "section": "2.2 Loading from Data Source",
    "text": "2.2 Loading from Data Source\n\n2.2.1 First Approach\nAs shown in Figure 1, to obtain the dispersion.nc file for a particular forecast, one must download from the specified URL. Our task was to download all available files across all forecasts. Figure 2 shows our first approach to doing this.\n[FIGURE 2, INCLUDE get_data_v0.py]\n\n\n2.2.2 Second Approach\n[talk about diff from 1st and 2nd approach]",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>The Data Source</span>"
    ]
  },
  {
    "objectID": "data_desc.html#first-approach",
    "href": "data_desc.html#first-approach",
    "title": "2  The Data Source",
    "section": "3.1 First Approach",
    "text": "3.1 First Approach\nAs shown in Figure 1, to obtain the dispersion.nc file for a particular forecast, one must download from the specified URL. Our task was to download all available files across all forecasts. Figure 2 shows our first approach to doing this.\n[FIGURE 2, INCLUDE get_data_v0.py]",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>The Data Source</span>"
    ]
  },
  {
    "objectID": "data_desc.html#second-approach",
    "href": "data_desc.html#second-approach",
    "title": "2  The Data Source",
    "section": "3.2 Second Approach",
    "text": "3.2 Second Approach\n[talk about diff from 1st and 2nd approach]",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>The Data Source</span>"
    ]
  },
  {
    "objectID": "data_source.html",
    "href": "data_source.html",
    "title": "3  The Data Source",
    "section": "",
    "text": "3.1 Downloading UBC Smoke Forecast Files",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>The Data Source</span>"
    ]
  },
  {
    "objectID": "data_source.html#data-access",
    "href": "data_source.html#data-access",
    "title": "2  The Data Source",
    "section": "",
    "text": "2.1.1 Download Instructions for UBC Smoke Forecast Data\nGo to this URL: https://firesmoke.ca/forecasts/{ForecastID}/{YYYYMMDD}{InitTime}/\nReplace ForecastID, YYYYMMDD, and InitTime with the appropriate values as described in Table 2.1:\n\n\n\nTable 2.1: UBC Smoke Forecast Data Download Parameters\n\n\n\n\n\n\n\n\n\n\n\nForecast ID\nDescription\nInitialization Time\nInstructions\n\n\n\n\nBSC00CA12-01\nBlueSky Canada smoke forecast, 00Z met (12km grid), 08Z fires, North America domain\n08\nReplace YYYYMMDD with date; append dispersion.nc or dispersion.kmz to download data\n\n\nBSC06CA12-01\nBlueSky Canada smoke forecast, 06Z met (12km grid), 14Z fires, North America domain\n14\nReplace YYYYMMDD with date; append dispersion.nc or dispersion.kmz to download data\n\n\nBSC12CA12-01\nBlueSky Canada smoke forecast, 12Z met (12km grid), 20Z fires, North America domain\n20\nReplace YYYYMMDD with date; append dispersion.nc or dispersion.kmz to download data\n\n\nBSC18CA12-01\nBlueSky Canada smoke forecast, 18Z met (12km grid), 02Z fires, North America domain\n02\nReplace YYYYMMDD with date; append dispersion.nc or dispersion.kmz to download data\n\n\n\n\n\n\n\n\n2.1.2 Available Time Range\nThe time ranges available for each forecast ID is shown in Table 2.2:\n\n\n\nTable 2.2: Dates for which all Forecast ID Datasets are Publicly Available\n\n\n\n\n\n\n\n\n\n\n\nForecast ID\nDescription\nStart Date\nEnd Date\n\n\n\n\nBSC00CA12-01\nBlueSky Canada smoke forecast, 00Z met (12km grid), 08Z fires, North America domain\nMarch 4, 2021\nPresent Day\n\n\nBSC06CA12-01\nBlueSky Canada smoke forecast, 06Z met (12km grid), 14Z fires, North America domain\nMarch 4, 2021\nPresent Day\n\n\nBSC12CA12-01\nBlueSky Canada smoke forecast, 12Z met (12km grid), 20Z fires, North America domain\nMarch 3, 2021\nPresent Day\n\n\nBSC18CA12-01\nBlueSky Canada smoke forecast, 18Z met (12km grid), 02Z fires, North America domain\nMarch 4, 2021\nPresent Day\n\n\n\n\n\n\nThe smoke forecasts are updated daily, including the present day, so there is no fixed end date. Therefore, the latest data must be downloaded on a regular basis. We have not implemented this process, so the latest forecast files we use are up to June 27, 2024.\nThere is no official source stating the earliest available date for each forecast. So, knowing the project began in 2021, we inferenced that the earliest available date would be in 2021. Via trial and error we found the earliest available dates.\nTODO The file downloaded at the specified URL download the 2-day forecast for [DATE] and [TIME] one could download the following files. [GET 2 DAY FORECAST DESCRIPTION FROM scribbles.ipynb].",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>The Data Source</span>"
    ]
  },
  {
    "objectID": "data_source.html#available-time-range",
    "href": "data_source.html#available-time-range",
    "title": "2  The Data Source",
    "section": "2.2 Available Time Range",
    "text": "2.2 Available Time Range\nThe time ranges available for each forecast ID is shown in Table 2.2:\n\n\n\nTable 2.2: Dates for which all Forecast ID Datasets are Publicly Available\n\n\n\n\n\n\n\n\n\n\n\nForecast ID\nDescription\nStart Date\nEnd Date\n\n\n\n\nBSC00CA12-01\nBlueSky Canada smoke forecast, 00Z met (12km grid), 08Z fires, North America domain\nMarch 4, 2021\nPresent Day\n\n\nBSC06CA12-01\nBlueSky Canada smoke forecast, 06Z met (12km grid), 14Z fires, North America domain\nMarch 4, 2021\nPresent Day\n\n\nBSC12CA12-01\nBlueSky Canada smoke forecast, 12Z met (12km grid), 20Z fires, North America domain\nMarch 3, 2021\nPresent Day\n\n\nBSC18CA12-01\nBlueSky Canada smoke forecast, 18Z met (12km grid), 02Z fires, North America domain\nMarch 4, 2021\nPresent Day\n\n\n\n\n\n\nThe smoke forecasts are updated daily, including the present day, so there is no fixed end date. Therefore, the latest data must be downloaded on a regular basis. We have not implemented this process, so the latest forecast files we use are up to June 27, 2024.\nThere is no official source stating the earliest available date for each forecast. So, knowing the project began in 2021, we inferenced that the earliest available date would be in 2021. Via trial and error we found the earliest available dates.\nTODO The file downloaded at the specified URL download the 2-day forecast for [DATE] and [TIME] one could download the following files. [GET 2 DAY FORECAST DESCRIPTION FROM scribbles.ipynb].",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>The Data Source</span>"
    ]
  },
  {
    "objectID": "data_source.html#netcdf-file-attributes",
    "href": "data_source.html#netcdf-file-attributes",
    "title": "2  The Data Source",
    "section": "2.3 NetCDF File Attributes",
    "text": "2.3 NetCDF File Attributes\n#TODO, MOVE TO ANOTHER SPOT: To view and manipulate NetCDF files, we have selected the xarray Python library and created a custom built backend that connects xarray to the OpenVisus framework.\nThe following shows the contents of the dispersion.nc file downloaded from the UBC website for dataset BSC00CA12-01 date March 4, 2021. We load it using xarray.\n\nimport xarray as xr\n\nds = xr.open_dataset(\"netCDFs/dispersion_20210304_00.nc\")\nds\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n&lt;xarray.Dataset&gt;\nDimensions:  (TSTEP: 51, VAR: 1, DATE-TIME: 2, LAY: 1, ROW: 381, COL: 1041)\nDimensions without coordinates: TSTEP, VAR, DATE-TIME, LAY, ROW, COL\nData variables:\n    TFLAG    (TSTEP, VAR, DATE-TIME) int32 ...\n    PM25     (TSTEP, LAY, ROW, COL) float32 ...\nAttributes: (12/33)\n    IOAPI_VERSION:  $Id: @(#) ioapi library version 3.0 $                    ...\n    EXEC_ID:        ????????????????                                         ...\n    FTYPE:          1\n    CDATE:          2021063\n    CTIME:          101914\n    WDATE:          2021063\n    ...             ...\n    VGLVLS:         [10.  0.]\n    GDNAM:          HYSPLIT CONC    \n    UPNAM:          hysplit2netCDF  \n    VAR-LIST:       PM25            \n    FILEDESC:       Hysplit Concentration Model Output                       ...\n    HISTORY:        xarray.DatasetDimensions:TSTEP: 51VAR: 1DATE-TIME: 2LAY: 1ROW: 381COL: 1041Coordinates: (0)Data variables: (2)TFLAG(TSTEP, VAR, DATE-TIME)int32...units :&lt;YYYYDDD,HHMMSS&gt;long_name :TFLAG           var_desc :Timestep-valid flags:  (1) YYYYDDD or (2) HHMMSS                                [102 values with dtype=int32]PM25(TSTEP, LAY, ROW, COL)float32...long_name :PM25            units :ug/m^3          var_desc :PM25                                                                            [20227671 values with dtype=float32]Indexes: (0)Attributes: (33)IOAPI_VERSION :$Id: @(#) ioapi library version 3.0 $                                           EXEC_ID :????????????????                                                                FTYPE :1CDATE :2021063CTIME :101914WDATE :2021063WTIME :101914SDATE :2021063STIME :90000TSTEP :10000NTHIK :1NCOLS :1041NROWS :381NLAYS :1NVARS :1GDTYP :1P_ALP :0.0P_BET :0.0P_GAM :0.0XCENT :-104.0YCENT :51.0XORIG :-156.0YORIG :32.0XCELL :0.10000000149011612YCELL :0.10000000149011612VGTYP :5VGTOP :-9999.0VGLVLS :[10.  0.]GDNAM :HYSPLIT CONC    UPNAM :hysplit2netCDF  VAR-LIST :PM25            FILEDESC :Hysplit Concentration Model Output                                              lat-lon coordinate system                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       HISTORY :\n\n\nThe file contains the following attributes. Note that for all files across forecast IDs, they have the same dimension and variable names:\n\n2.3.1 Dimensions:\n\n\n\n\n\n\n\n\nDimension\nSize\nDescription\n\n\n\n\nTSTEP\n51\nThis dimension represents the number of time steps in the file. Each file has 51 hours represented.\n\n\nVAR\n1\nThis dimension is a placeholder for the variables in the file.\n\n\nDATE-TIME\n2\nThis dimension stores the date and time information for each time step.\n\n\nLAY\n1\nThis dimension represents the number of layers in the file, which is 1 in this case.\n\n\nROW\n381\nThis dimension represents the number of rows in the spatial grid.\n\n\nCOL\n1041\nThis dimension represents the number of columns in the spatial grid.\n\n\n\n\n\n2.3.2 Data Variables:\n\n\n\n\n\n\n\n\n\nVariable\nDimensions\nData Type\nDescription\n\n\n\n\nTFLAG\n(TSTEP, VAR, DATE-TIME)\nint32\nThis variable stores the date and time of each time step.\n\n\nPM25\n(TSTEP, LAY, ROW, COL)\nfloat32\nThis variable contains the concentration of particulate matter (PM2.5) for each time step, layer, row, and column in the spatial grid.",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>The Data Source</span>"
    ]
  },
  {
    "objectID": "data_loading.html",
    "href": "data_loading.html",
    "title": "4  Data Loading",
    "section": "",
    "text": "4.1 Download Scripts\nWe decided to download all the available files from the data source onto our data staging machine to process from there. The following shows our approaches to doing this and discusses how our approach evolved.",
    "crumbs": [
      "<span class='chapter-number'>4</span>  <span class='chapter-title'>Data Loading</span>"
    ]
  },
  {
    "objectID": "data_loading.html#second-approach",
    "href": "data_loading.html#second-approach",
    "title": "3  Data Loading",
    "section": "3.2 Second Approach",
    "text": "3.2 Second Approach\n[talk about diff from 1st and 2nd approach]",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Data Loading</span>"
    ]
  },
  {
    "objectID": "data_source.html#the-netcdf-file",
    "href": "data_source.html#the-netcdf-file",
    "title": "3  The Data Source",
    "section": "3.2 The NetCDF File",
    "text": "3.2 The NetCDF File\nNext, let’s look at what is within the NetCDF file located at the URL in our previous example.\n\n3.2.1 File Preview\n\nWe load dispersion.nc using xarray, which provides a handy preview of the file.\n\n\nCode\nimport xarray as xr\n\nds = xr.open_dataset(\"data/data_source/dispersion.nc\")\nds\n\n\n\n\n3.2.2 File Attributes\ndispersion.nc contains the following attributes. Note that for all files across forecast IDs, they have the same dimension and variable names:\n\n3.2.2.1 Dimensions:\nThese dimensions determine on which indicies we may index our variables.\n\n\n\n\n\n\n\n\nDimension\nSize\nDescription\n\n\n\n\nTSTEP\n51\nThis dimension represents the number of time steps in the file. Each file has 51 hours represented.\n\n\nVAR\n1\nThis dimension is a placeholder for the variables in the file.\n\n\nDATE-TIME\n2\nThis dimension stores the date and time information for each time step.\n\n\nLAY\n1\nThis dimension represents the number of layers in the file, which is 1 in this case.\n\n\nROW\n381\nThis dimension represents the number of rows in the spatial grid.\n\n\nCOL\n1041\nThis dimension represents the number of columns in the spatial grid.\n\n\n\n\n\n3.2.2.2 Variables:\nThese variables contain the data in question that we would like to extract.\n\n\n\n\n\n\n\n\n\nVariable\nDimensions\nData Type\nDescription\n\n\n\n\nTFLAG\nTSTEP, VAR, DATE-TIME\nint32\nThis variable stores the date and time of each time step.\n\n\nPM25\nTSTEP, LAY, ROW, COL\nfloat32\nThis variable contains the concentration of particulate matter (PM2.5) for each time step, layer, row, and column in the spatial grid.\n\n\n\n\n\n3.2.2.3 Attributes\nOf the 33 available attributes we use the following: TODO NEED TO CONFIRM WITH UBC IF THIS IS RIGHT\n\n\n\n\n\n\n\n\nAttribute\nValue\nDescription\n\n\n\n\nCDATE\n2021063\nThe creation date of the dataset, in YYYYDDD format.\n\n\nCTIME\n101914\nThe creation time of the dataset, in HHMMSS format.\n\n\nWDATE\n2021063\nThe date for which the weather forecast is initiated, in YYYYDDD format.\n\n\nWTIME\n101914\nThe time for which the weather forecast is initiated, in HHMMSS format.\n\n\nSDATE\n2021063\nThe date for which the smoke forecast is initiated,in YYYYDDD format.\n\n\nSTIME\n90000\nThe time for which the weather forecast is initiated, in HHMMSS format.\n\n\nNCOLS\n1041\nThe number of columns in the spatial grid.\n\n\nNROWS\n381\nThe number of rows in the spatial grid.\n\n\nXORIG\n-156.0\nThe origin (starting point) of the grid in the x-direction.\n\n\nYORIG\n32.0\nThe origin (starting point) of the grid in the y-direction.\n\n\nXCELL\n0.10000000149011612\nThe cell size in the x-direction.\n\n\nYCELL\n0.10000000149011612\nThe cell size in the y-direction.\n\n\n\nNow that we understand what exactly is within one NetCDF file, let’s establish the information we have when we download all available NetCDF files.",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>The Data Source</span>"
    ]
  },
  {
    "objectID": "data_source.html#disk-space",
    "href": "data_source.html#disk-space",
    "title": "2  The Data Source",
    "section": "2.4 Disk Space",
    "text": "2.4 Disk Space\nFor the time ranges we cover, the following table shows how large the set of files per forecast ID require.\n\n\n\nForecast ID\nDate Range\nSize\n\n\n\n\nBSC00CA12-01\nMarch 4, 2021 - Present Day\n84G\n\n\nBSC06CA12-01\nMarch 4, 2021 - Present Day\n78G\n\n\nBSC12CA12-01\nMarch 3, 2021 - Present Day\n79G\n\n\nBSC18CA12-01\nMarch 4, 2021 - Present Day\n79G\n\n\nTotal\n\n320G",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>The Data Source</span>"
    ]
  },
  {
    "objectID": "data_loading.html#first-approach",
    "href": "data_loading.html#first-approach",
    "title": "4  Data Loading",
    "section": "4.2 First Approach",
    "text": "4.2 First Approach\nWe delineate our first approach by detailing our download script. To find the original script, please check here.\n\nWe define the arguments necessary for building the URL to download a 2-day forecast for a specified forecast ID and date into the following arrays.\n\nids = [\"BSC18CA12-01\", \"BSC00CA12-01\", \"BSC06CA12-01\", \"BSC12CA12-01\"]\nstart_dates = [\"20210304\", \"20210304\", \"20210304\", \"20210303\"]\nend_dates = [\"20231016\", \"20240210\", \"20231016\", \"20231015\"]\ninit_times = [\"02\", \"08\", \"14\", \"20\"]\n\nWe use a for loop to step through these parameter arrays.\n\nfor i in zip(start_dates, end_dates, ids, init_times):\n    start_date = i[0]\n    end_date = i[1]\n    forecast_id = i[2]\n    init_time = i[3]\n    ...\n\n\nimport wget\nimport pandas as pd\n\n\n\n\n    print(\"Get data for \" + forecast_id + \" from dates \" + start_date + \" to \" + end_date + \"; init_time is \" + init_time)\n    \n    # generate dates of interest, which is all available data for each dataset\n    # ref: https://stackoverflow.com/questions/59882714/python-generating-a-list-of-dates-between-two-dates\n    dates = pd.date_range(start=start_date, end=end_date)\n    dates = dates.strftime('%Y%m%d').tolist()\n\n    # download datasets in specified dates\n    for date in dates:\n        # build URL string to download from and directory & filename to download to\n        url = \"https://firesmoke.ca/forecasts/\" + forecast_id + \"/\" + date + init_time + \"/dispersion.nc\"\n        directory = \"/Users/arleth/Mount/firesmoke/\" + forecast_id + \"/dispersion_\" + date + \".nc\"\n        wget.download(url, out=directory)",
    "crumbs": [
      "<span class='chapter-number'>4</span>  <span class='chapter-title'>Data Loading</span>"
    ]
  },
  {
    "objectID": "data_source.html#disk-size",
    "href": "data_source.html#disk-size",
    "title": "3  The Data Source",
    "section": "3.3 Disk Size",
    "text": "3.3 Disk Size\nFor the time ranges we cover, the following table shows how large the set of files per forecast ID require.\n\n\n\nForecast ID\nDate Range\nSize\n\n\n\n\nBSC00CA12-01\nMarch 4, 2021 - Present Day\n84G\n\n\nBSC06CA12-01\nMarch 4, 2021 - Present Day\n78G\n\n\nBSC12CA12-01\nMarch 3, 2021 - Present Day\n79G\n\n\nBSC18CA12-01\nMarch 4, 2021 - Present Day\n79G\n\n\nTotal\n\n320G",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>The Data Source</span>"
    ]
  },
  {
    "objectID": "sys_specs.html",
    "href": "sys_specs.html",
    "title": "2  System and Environment",
    "section": "",
    "text": "2.1 Machine Specification\nThe data we curate is over 300 gigabytes large. Therefore we used the SCI institute’s in-house machine ‘atlantis’ for data staging and processing. See Table 2.1.",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>System and Environment</span>"
    ]
  },
  {
    "objectID": "sys_specs.html#machine-specification",
    "href": "sys_specs.html#machine-specification",
    "title": "2  System and Environment",
    "section": "",
    "text": "Table 2.1: ‘atlantis’ System Specifications\n\n\n\n\n\nProperty\nValue\n\n\n\n\nArchitecture\nx86_64\n\n\nCPU op-mode(s)\n32-bit, 64-bit\n\n\nByte Order\nLittle Endian\n\n\nAddress sizes\n44 bits physical, 48 bits virtual\n\n\nCPU(s)\n48\n\n\nOn-line CPU(s) list\n0-47\n\n\nThread(s) per core\n2\n\n\nCore(s) per socket\n6\n\n\nSocket(s)\n4",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>System and Environment</span>"
    ]
  },
  {
    "objectID": "sys_specs.html#environment",
    "href": "sys_specs.html#environment",
    "title": "2  System and Environment",
    "section": "2.2 Environment",
    "text": "2.2 Environment\nWe aim to work in an environment that can be most easily reproduced and documented. Therefore we used Python 3.9.19 via conda. We did all our work within the Project Jupyter environment.\nTo find our the yml file containing our exported conda environment please see the sidebar.\nIn the proceeding chapters we will specify which tools and libraries were used and why.",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>System and Environment</span>"
    ]
  },
  {
    "objectID": "data_loading.html#download-scripts",
    "href": "data_loading.html#download-scripts",
    "title": "4  Data Loading",
    "section": "",
    "text": "4.1.1 First Approach\n\n4.1.1.1 Overview\nWe delineate our first approach by detailing our download script, which is available in it’s entirety in the side bar.\n\nWe define the arguments necessary for building the URL to download a 2-day forecast for a specified forecast ID and date into the following arrays.\n\n\nmatplotlib.py\n\nids = [\"BSC18CA12-01\", \"BSC00CA12-01\", \"BSC06CA12-01\", \"BSC12CA12-01\"]\nstart_dates = [\"20210304\", \"20210304\", \"20210304\", \"20210303\"]\nend_dates = [\"20231016\", \"20240210\", \"20231016\", \"20231015\"]\ninit_times = [\"02\", \"08\", \"14\", \"20\"]\n\nWe use a for loop to step through these parameter arrays. Within the for loop, we use pandas to create a list of every date from the start date and end date of the current iteration.\n\n\nCode\nfor i in zip(start_dates, end_dates, ids, init_times):\n    start_date = i[0]\n    end_date = i[1]\n    forecast_id = i[2]\n    init_time = i[3]\n\n    dates = pd.date_range(start=start_date, end=end_date)\n    dates = dates.strftime(\"%Y%m%d\").tolist()\n    ...\n\n\nWe begin another for loop over dates. For each date in the list, we build the url to download the file for the ID specified in the outer for loop at the date of the current iteration.\n\n\nCode\nfor date in dates:\n    url = (\n        \"https://firesmoke.ca/forecasts/\"\n        + forecast_id\n        + \"/\"\n        + date\n        + init_time\n        + \"/dispersion.nc\"\n    )\n\n\nFinally, we use wget to download the contents at urlto directory. We append date to the file name so they are identifiable by date.\n\n\nCode\ndirectory = \"/Users/arleth/Mount/firesmoke/\" + forecast_id + \"/dispersion_\" + date + \".nc\"\nwget.download(url, out=directory)\n\n\n\n\n4.1.1.2 Results",
    "crumbs": [
      "<span class='chapter-number'>4</span>  <span class='chapter-title'>Data Loading</span>"
    ]
  },
  {
    "objectID": "data_source.html#tbl-access",
    "href": "data_source.html#tbl-access",
    "title": "2  The Data Source",
    "section": "2.2 Download Instructions for UBC Smoke Forecast Data",
    "text": "2.2 Download Instructions for UBC Smoke Forecast Data\nGo to this URL: https://firesmoke.ca/forecasts/{Forecast ID}/{YYYYMMDD}{Initialization Time}/\nWhere Forecast ID, YYYYMMDD, and Initialization Time are set according to parameters described in Table 2.1.\n\n\n\nTable 2.1: Download Instructions for UBC Smoke Forecast Data\n\n\n\n\n\n\n\n\n\n\n\nForecast ID\nDescription\nInitialization Time\nInstructions\n\n\n\n\nBSC00CA12-01\nBlueSky Canada smoke forecast, 00Z met (12km grid), 08Z fires, North America domain\n08\nReplace YYYYMMDD with date; append dispersion.nc or dispersion.kmz to download data\n\n\nBSC06CA12-01\nBlueSky Canada smoke forecast, 06Z met (12km grid), 14Z fires, North America domain\n14\nReplace YYYYMMDD with date; append dispersion.nc or dispersion.kmz to download data\n\n\nBSC12CA12-01\nBlueSky Canada smoke forecast, 12Z met (12km grid), 20Z fires, North America domain\n20\nReplace YYYYMMDD with date; append dispersion.nc or dispersion.kmz to download data\n\n\nBSC18CA12-01\nBlueSky Canada smoke forecast, 18Z met (12km grid), 02Z fires, North America domain\n02\nReplace YYYYMMDD with date; append dispersion.nc or dispersion.kmz to download data\n\n\n\n\n\n\n\n2.2.1 URL Generation Example\nTo generate the URL for downloading the data, use the following pattern:",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>The Data Source</span>"
    ]
  },
  {
    "objectID": "data_source.html#downloading-ubc-smoke-forecast-data",
    "href": "data_source.html#downloading-ubc-smoke-forecast-data",
    "title": "2  The Data Source",
    "section": "",
    "text": "2.1.1 Available Time Range\nThe time ranges of available data for each forecast ID is shown in Table 2.1:\n\n\n\nTable 2.1: Dates for which all Forecast ID Datasets are Publicly Available\n\n\n\n\n\n\n\n\n\n\n\nForecast ID\nDescription\nStart Date\nEnd Date\n\n\n\n\nBSC00CA12-01\nBlueSky Canada smoke forecast, 00Z met (12km grid), 08Z fires, North America domain\nMarch 4, 2021\nPresent Day\n\n\nBSC06CA12-01\nBlueSky Canada smoke forecast, 06Z met (12km grid), 14Z fires, North America domain\nMarch 4, 2021\nPresent Day\n\n\nBSC12CA12-01\nBlueSky Canada smoke forecast, 12Z met (12km grid), 20Z fires, North America domain\nMarch 3, 2021\nPresent Day\n\n\nBSC18CA12-01\nBlueSky Canada smoke forecast, 18Z met (12km grid), 02Z fires, North America domain\nMarch 4, 2021\nPresent Day\n\n\n\n\n\n\nThe smoke forecasts are updated daily, including the present day, so there is no fixed end date. Therefore, the latest data must be downloaded on a regular basis. We have not implemented this process, so the latest forecast files we use are up to June 27, 2024.\nThere is no official source stating the earliest available date for each forecast. So, knowing the project began in 2021, we inferenced that the earliest available date would be in 2021. Via trial and error we found the earliest available dates.\n\n\n\n\n\n\nWarning\n\n\n\nThere are occassional failed forecasts or otherwise unavailable files within the date ranges specified above.\n\n\n\n\n2.1.2 Download Instructions\nTo download the 2-day forecast for the forecast initialization date of one’s choice, one follows the instructions below. The downloaded file can be a NetCDF format or KMZ file. For our purposes, we downloaded the NetCDF file version as the KMZ file is for use with Google Earth. Later in Chapter 4 we detail our automation of the download process described below.\n\nGo to this URL: https://firesmoke.ca/forecasts/{ForecastID}/{YYYYMMDD}{InitTime}/\nReplace ForecastID, YYYYMMDD, and InitTime with the appropriate values as described in Table 2.2:\n\n\n\nTable 2.2: UBC Smoke Forecast Data Download Parameters\n\n\n\n\n\n\n\n\n\n\n\nForecast ID\nDescription\nInitialization Time\nInstructions\n\n\n\n\nBSC00CA12-01\nBlueSky Canada smoke forecast, 00Z met (12km grid), 08Z fires, North America domain\n08\nReplace YYYYMMDD with date; append dispersion.nc or dispersion.kmz to download data\n\n\nBSC06CA12-01\nBlueSky Canada smoke forecast, 06Z met (12km grid), 14Z fires, North America domain\n14\nReplace YYYYMMDD with date; append dispersion.nc or dispersion.kmz to download data\n\n\nBSC12CA12-01\nBlueSky Canada smoke forecast, 12Z met (12km grid), 20Z fires, North America domain\n20\nReplace YYYYMMDD with date; append dispersion.nc or dispersion.kmz to download data\n\n\nBSC18CA12-01\nBlueSky Canada smoke forecast, 18Z met (12km grid), 02Z fires, North America domain\n02\nReplace YYYYMMDD with date; append dispersion.nc or dispersion.kmz to download data\n\n\n\n\n\n\n\n2.1.2.1 Example\nUsing these instructions, one can generate the URL for downloading the data. Let’s try downloading the forecast for January 1, 2024 where the forecast is initiated at 00:00:00 UTC.\n\nforecast_id = \"BSC00CA12-01\"\nyyyymmdd = \"20240101\"\ninit_time = \"08\"\n\nurl = f'https://firesmoke.ca/forecasts/{forecast_id}/{yyyymmdd}{init_time}/dispersion.nc'\n\nprint(f'Navigate to this URL in your browser: {url}')\n\nNavigate to this URL in your browser: https://firesmoke.ca/forecasts/BSC00CA12-01/2024010108/dispersion.nc\n\n\nTODO The file downloaded at the specified URL download the 2-day forecast for [DATE] and [TIME] one could download the following files. [GET 2 DAY FORECAST DESCRIPTION FROM scribbles.ipynb].",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>The Data Source</span>"
    ]
  },
  {
    "objectID": "data_source.html#downloading-ubc-smoke-forecast-files",
    "href": "data_source.html#downloading-ubc-smoke-forecast-files",
    "title": "3  The Data Source",
    "section": "",
    "text": "3.1.1 Available Time Range\nTODO CREDIT UBC The time ranges of available data for each forecast ID is shown in Table 3.1. Please note, there are occassional failed forecasts or otherwise unavailable files within the date ranges specified Table 3.1.\n\n\n\nTable 3.1: Dates for which all Forecast ID Datasets are Publicly Available. All times are in UTC and the grid size is 12 km.\n\n\n\n\n\n\n\n\n\n\n\n\nForecast ID\nMeteorology Forecast Initialization (UTC)\nSmoke Forecast Initialization (UTC)\nStart Date\nEnd Date\n\n\n\n\nBSC00CA12-01\n00Z\n08Z\nMarch 4, 2021\nPresent Day\n\n\nBSC06CA12-01\n06Z\n14Z\nMarch 4, 2021\nPresent Day\n\n\nBSC12CA12-01\n12Z\n20Z\nMarch 3, 2021\nPresent Day\n\n\nBSC18CA12-01\n18Z\n02Z\nMarch 4, 2021\nPresent Day\n\n\n\n\n\n\nTODO what do grid sizes mean, i.e. Meteorology: 00 UTC, nested 12 km + 36 km grids Smoke: 08 UTC\nThe smoke forecasts are updated daily, including the present day, so there is no fixed end date. Therefore, the latest data must be downloaded on a regular basis. We have not implemented this process yet, so the latest forecast files we use are up to June 27, 2024.\nThere is no official source stating the earliest available date for each forecast. So, knowing the project began in 2021, we inferenced that the earliest available date would be in 2021. Via trial and error we found the earliest available dates.\n\n\n3.1.2 Download Instructions\nTo download the 2-day forecast for the forecast initialization date of one’s choice, one follows the instructions below. The downloaded file can be a NetCDF or KMZ file. We use NetCDF files. Later in Chapter 4 we detail our automation of the download process described below.\n\nTODO CREDIT UBC\nGo to the URL: https://firesmoke.ca/forecasts/{Forecast ID}/{YYYYMMDD}{InitTime}/{File Type}\nWhere:\n\nYYYYMMDD is the date of choice.\nForecastID and InitTime are the chosen values as described in Table 3.2.\nFile Type is either dispersion.nc or dispersion.kmz for either the NetCDF file or KMZ file, respectively.\n\n\n\n\nTable 3.2: UBC Smoke Forecast Data Download Parameters. All times are in UTC and the grid size is 12 km.\n\n\n\n\n\nForecast ID\nSmoke Forecast Initialization (UTC)\n\n\n\n\nBSC00CA12-01\n08Z\n\n\nBSC06CA12-01\n14Z\n\n\nBSC12CA12-01\n20Z\n\n\nBSC18CA12-01\n02Z\n\n\n\n\n\n\n\n3.1.2.1 Download Example\nLet’s try downloading the forecast for January 1, 2024 where the weather forecast is initiated at 00:00:00 UTC and the smoke forecast is initialized at 08:00:00 UTC by navigating to the corresponding URL.\n\n\nCode\nforecast_id = \"BSC00CA12-01\"\nyyyymmdd = \"20210304\"\ninit_time = \"08\"\n\nurl = (\n    f\"https://firesmoke.ca/forecasts/{forecast_id}/{yyyymmdd}{init_time}/dispersion.nc\"\n)\n\nprint(f\"Navigate to this URL in your browser: {url}\")",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>The Data Source</span>"
    ]
  },
  {
    "objectID": "index.html#overview-and-page-organization",
    "href": "index.html#overview-and-page-organization",
    "title": "UBC Smoke Forecast Data Curation",
    "section": "Overview and Page Organization",
    "text": "Overview and Page Organization\nThis webpage is produced using Quart.\nYou can find the source code for this page at TODO.\nAll files or directories in this website are hosted at our GitHub repository, unless otherwise specified.",
    "crumbs": [
      "Preface"
    ]
  },
  {
    "objectID": "data_source.html#metadata-about-the-downloaded-collection-of-netcdf-files",
    "href": "data_source.html#metadata-about-the-downloaded-collection-of-netcdf-files",
    "title": "3  The Data Source",
    "section": "3.3 Metadata About the Downloaded Collection of NetCDF Files",
    "text": "3.3 Metadata About the Downloaded Collection of NetCDF Files\n\n3.3.1 Disk Size\nFor the time ranges we cover, the following table shows how large the set of files per forecast ID require.\n\n\n\nForecast ID\nDate Range\nSize\n\n\n\n\nBSC00CA12-01\nMarch 4, 2021 - Present Day\n84G\n\n\nBSC06CA12-01\nMarch 4, 2021 - Present Day\n78G\n\n\nBSC12CA12-01\nMarch 3, 2021 - Present Day\n79G\n\n\nBSC18CA12-01\nMarch 4, 2021 - Present Day\n79G\n\n\nTotal\n\n320G\n\n\n\n\n\n3.3.2 Data Uniformity\nTo create our dataset, we operated under the following assumptions about the NetCDF files: 1. All files across all four forecast IDs have the same NROWS, XORIG, YORIG, XCELL, YCELL values. 2. Some files have either NCOLS = 1041 or NCOLS = 1081. 3. {C,W,S}_DATE and {C,W,S}_TIME values are unique to each file.",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>The Data Source</span>"
    ]
  },
  {
    "objectID": "data_source.html#metadata-of-collected-netcdf-files",
    "href": "data_source.html#metadata-of-collected-netcdf-files",
    "title": "3  The Data Source",
    "section": "3.3 Metadata of Collected NetCDF Files",
    "text": "3.3 Metadata of Collected NetCDF Files\nHere we describe metadata about the collection of NetCDF files we downloaded.\n\n3.3.1 Disk Size\nFor the time ranges we cover, the following table shows how large the set of files per forecast ID are.\n\n\n\n\n\n\n\n\n\nForecast ID\nDate Range\nSize\nFile Count\n\n\n\n\nBSC00CA12-01\nMarch 4, 2021 - June 27, 2024\n84G\n1077\n\n\nBSC06CA12-01\nMarch 4, 2021 - June 27, 2024\n78G\n1022\n\n\nBSC12CA12-01\nMarch 3, 2021 - June 27, 2024\n79G\n1022\n\n\nBSC18CA12-01\nMarch 4, 2021 - June 27, 2024\n79G\n1023\n\n\nTotal\n\n320G\n4144\n\n\n\n\n\n3.3.2 Data Uniformity\nTo create our dataset, we used the following understanding about the attributes across all files:\n\nAll files across all four forecast IDs have the same NROWS, XORIG, YORIG, XCELL, YCELL values.\nSome files have either NCOLS = 1041 or NCOLS = 1081.\n{C,W,S}_DATE and {C,W,S}_TIME values are unique to each file.\n\nNow that we know what data is available and how it can be obtained, we describe next how to extract data from these files to form one dataset.",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>The Data Source</span>"
    ]
  }
]